
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>It-Pattern Sentence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .draggable {
            cursor: grab;
            user-select: none;
        }
        .draggable:active {
            cursor: grabbing;
        }
        .droppable {
            transition: all 0.2s ease;
        }
        .droppable.highlight {
            background-color: #e0f2fe !important;
            transform: scale(1.02);
        }
        .warning {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        .success-animation {
            animation: success-pulse 0.5s;
        }
        @keyframes success-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .shuffle-animation {
            animation: shuffle 0.8s ease-in-out;
        }
        @keyframes shuffle {
            0% { transform: translateX(0) translateY(0) rotate(0deg); }
            25% { transform: translateX(10px) translateY(-10px) rotate(5deg); }
            50% { transform: translateX(-5px) translateY(5px) rotate(-3deg); }
            75% { transform: translateX(5px) translateY(-5px) rotate(2deg); }
            100% { transform: translateX(0) translateY(0) rotate(0deg); }
        }
        .main-content {
            flex: 1;
        }
        footer {
            margin-top: auto;
        }
    </style>
</head>
<body>
    <div class="main-content container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-indigo-800 mb-2">It-Pattern Sentence</h1>
            <p class="text-lg text-indigo-600">Master the "It be ... to ... / It be ... that ..." sentence pattern</p>
        </header>

        <!-- Explanation Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-indigo-700 mb-4">Understanding the "It" Pattern</h2>
            
            <div class="mb-6">
                <h3 class="font-semibold text-indigo-600 mb-2">Pattern 1: "It be + adjective + to + verb (for someone)"</h3>
                <p class="mb-2"><span class="font-medium">English:</span> This pattern is used to express opinions or feelings about actions. The "(for someone)" part is optional and can be added to specify who the action relates to.</p>
                <p class="mb-2"><span class="font-medium">中文說明：</span>「虛主詞 It + be動詞 + 形容詞 + to + 動詞原形 (+ for someone)」這個句型用來表達對某個動作的看法或感受。「(for someone)」部分是可選的，可以用來指明動作與誰有關。</p>
                <div class="bg-indigo-50 p-3 rounded-md">
                    <p class="text-indigo-800"><strong>Examples:</strong></p>
                    <ul class="list-disc pl-5 text-indigo-700">
                        <li>It is important to study every day.</li>
                        <li>It was difficult <span class="underline">for her</span> to solve that problem.</li>
                        <li>It would be nice <span class="underline">for us</span> to visit Paris someday.</li>
                    </ul>
                </div>
            </div>
            
            <div>
                <h3 class="font-semibold text-indigo-600 mb-2">Pattern 2: "It be + adjective + that + clause"</h3>
                <p class="mb-2"><span class="font-medium">English:</span> This pattern is used to emphasize opinions or feelings about facts or situations.</p>
                <p class="mb-2"><span class="font-medium">中文說明：</span>「虛主詞 It + be動詞 + 形容詞 + that + 子句」這個句型用來強調對事實或情況的看法或感受。</p>
                <div class="bg-indigo-50 p-3 rounded-md">
                    <p class="text-indigo-800"><strong>Examples:</strong></p>
                    <ul class="list-disc pl-5 text-indigo-700">
                        <li>It is surprising that he won the competition.</li>
                        <li>It was obvious that she didn't understand.</li>
                        <li>It is important that everyone arrives on time.</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Game Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-indigo-700 mb-4">Practice Game</h2>
            <p class="mb-6 text-gray-700">Drag and drop the correct words to complete the sentences using the "It" pattern.</p>

            <!-- Level Selection -->
            <div class="mb-6">
                <h3 class="font-semibold text-indigo-600 mb-2">Select Level:</h3>
                <div class="flex flex-wrap gap-2">
                    <button id="level1" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition active">Level 1</button>
                    <button id="level2" class="px-4 py-2 bg-indigo-200 text-indigo-800 rounded-md hover:bg-indigo-300 transition">Level 2</button>
                    <button id="level3" class="px-4 py-2 bg-indigo-200 text-indigo-800 rounded-md hover:bg-indigo-300 transition">Level 3</button>
                </div>
            </div>

            <!-- Game Area -->
            <div id="gameArea" class="mb-6">
                <!-- Will be populated by JavaScript -->
            </div>

            <!-- Word Bank -->
            <div class="mb-6">
                <h3 class="font-semibold text-indigo-600 mb-2">Word Bank:</h3>
                <div id="wordBank" class="flex flex-wrap gap-2 p-4 bg-indigo-50 rounded-lg min-h-[80px]">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Controls -->
            <div class="flex justify-between">
                <button id="checkBtn" class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition">Check Answers</button>
                <button id="resetBtn" class="px-6 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition">Reset</button>
                <button id="nextBtn" class="px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition" disabled>Next Sentence</button>
            </div>
        </div>

        <!-- Score Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-indigo-700 mb-4">Your Progress</h2>
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-700">Current Score: <span id="score" class="font-bold text-indigo-600">0</span></p>
                    <p class="text-gray-700">Sentences Completed: <span id="completed" class="font-bold text-indigo-600">0</span>/<span id="total" class="font-bold text-indigo-600">5</span></p>
                </div>
                <div class="w-1/2 bg-gray-200 rounded-full h-4">
                    <div id="progressBar" class="bg-indigo-600 h-4 rounded-full" style="width: 0%"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-indigo-800 text-indigo-100 py-6 mt-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0">
                <!-- Links -->
                <div class="flex items-center space-x-4">
                    <a href="https://www.aaronshi.cc" target="_blank" rel="noopener noreferrer" class="flex items-center hover:text-white transition duration-300">
                        Go to AaronShi.cc
                    </a>
                    <span class="text-indigo-300">|</span>
                    <a href="https://app.aaronshi.cc" target="_blank" rel="noopener noreferrer" class="flex items-center hover:text-white transition duration-300">
                        Back to AaronShi.cc App
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Game data
            const levels = {
                level1: [
                    {
                        sentence: "__ __ important __ study every day.",
                        correctAnswer: ["It", "is", "to"],
                        options: ["It", "is", "to", "that", "was", "be"],
                        type: "to-infinitive"
                    },
                    {
                        sentence: "__ __ nice __ meet new people.",
                        correctAnswer: ["It", "is", "to"],
                        options: ["It", "is", "to", "that", "was", "be"],
                        type: "to-infinitive"
                    },
                    {
                        sentence: "__ __ surprising __ she won the race.",
                        correctAnswer: ["It", "is", "that"],
                        options: ["It", "is", "to", "that", "was", "be"],
                        type: "that-clause"
                    },
                    {
                        sentence: "__ __ difficult __ solve this problem.",
                        correctAnswer: ["It", "is", "to"],
                        options: ["It", "is", "to", "that", "was", "be"],
                        type: "to-infinitive"
                    },
                    {
                        sentence: "__ __ obvious __ he didn't understand.",
                        correctAnswer: ["It", "is", "that"],
                        options: ["It", "is", "to", "that", "was", "be"],
                        type: "that-clause"
                    }
                ],
                level2: [
                    {
                        sentence: "__ __ important __ everyone __ on time.",
                        correctAnswer: ["It", "is", "that", "arrives"],
                        options: ["It", "is", "that", "arrives", "to", "arriving"],
                        type: "that-clause"
                    },
                    {
                        sentence: "__ __ wonderful __ travel __ different countries.",
                        correctAnswer: ["It", "is", "to", "to"],
                        options: ["It", "is", "to", "that", "was", "be"],
                        type: "to-infinitive"
                    },
                    {
                        sentence: "__ __ strange __ nobody __ the truth.",
                        correctAnswer: ["It", "is", "that", "knows"],
                        options: ["It", "is", "that", "knows", "to", "knowing"],
                        type: "that-clause"
                    },
                    {
                        sentence: "__ __ essential __ drink enough water every day.",
                        correctAnswer: ["It", "is", "to"],
                        options: ["It", "is", "to", "that", "was", "be"],
                        type: "to-infinitive"
                    },
                    {
                        sentence: "__ __ unfortunate __ the concert __ canceled.",
                        correctAnswer: ["It", "is", "that", "was"],
                        options: ["It", "is", "that", "was", "to", "be"],
                        type: "that-clause"
                    }
                ],
                level3: [
                    {
                        sentence: "__ __ __ be dangerous __ walk alone at night.",
                        correctAnswer: ["It", "can", "to"],
                        options: ["It", "can", "to", "that", "is", "be"],
                        type: "to-infinitive"
                    },
                    {
                        sentence: "__ __ necessary __ you __ all the requirements.",
                        correctAnswer: ["It", "is", "that", "meet"],
                        options: ["It", "is", "that", "meet", "to", "meeting"],
                        type: "that-clause"
                    },
                    {
                        sentence: "__ __ __ been difficult __ adapt to the new system.",
                        correctAnswer: ["It", "has", "to"],
                        options: ["It", "has", "to", "that", "is", "been"],
                        type: "to-infinitive"
                    },
                    {
                        sentence: "__ __ crucial __ we __ this project by Friday.",
                        correctAnswer: ["It", "is", "that", "finish"],
                        options: ["It", "is", "that", "finish", "to", "finishing"],
                        type: "that-clause"
                    },
                    {
                        sentence: "__ __ __ be wonderful __ the weather __ nice tomorrow.",
                        correctAnswer: ["It", "would", "if", "were"],
                        options: ["It", "would", "if", "were", "that", "to"],
                        type: "conditional"
                    }
                ]
            };

            // Game state
            let currentLevel = 'level1';
            let currentSentenceIndex = 0;
            let score = 0;
            let completed = 0;
            let totalSentences = levels[currentLevel].length;
            let droppedWords = {};

            // DOM elements
            const gameArea = document.getElementById('gameArea');
            const wordBank = document.getElementById('wordBank');
            const checkBtn = document.getElementById('checkBtn');
            const resetBtn = document.getElementById('resetBtn');
            const nextBtn = document.getElementById('nextBtn');
            const scoreElement = document.getElementById('score');
            const completedElement = document.getElementById('completed');
            const totalElement = document.getElementById('total');
            const progressBar = document.getElementById('progressBar');
            const levelButtons = document.querySelectorAll('#level1, #level2, #level3');

            // Initialize game
            initGame();

            // Event listeners
            checkBtn.addEventListener('click', checkAnswer);
            resetBtn.addEventListener('click', resetSentence);
            nextBtn.addEventListener('click', nextSentence);
            
            levelButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Only change if selecting a different level
                    if (button.id !== currentLevel) {
                        // Reset active state
                        levelButtons.forEach(btn => {
                            btn.classList.remove('bg-indigo-600', 'text-white');
                            btn.classList.add('bg-indigo-200', 'text-indigo-800');
                        });
                        
                        // Set new active button
                        button.classList.remove('bg-indigo-200', 'text-indigo-800');
                        button.classList.add('bg-indigo-600', 'text-white');
                        
                        // Change level
                        currentLevel = button.id;
                        currentSentenceIndex = 0;
                        score = 0;
                        completed = 0;
                        totalSentences = levels[currentLevel].length;
                        
                        // Update UI
                        updateScore();
                        initGame();
                    }
                });
            });

            function initGame() {
                // Update total sentences display
                totalElement.textContent = totalSentences;
                
                // Display first sentence
                displaySentence();
            }

            function displaySentence() {
                // Clear previous sentence
                gameArea.innerHTML = '';
                wordBank.innerHTML = '';
                droppedWords = {};
                nextBtn.disabled = true;
                
                const currentSentence = levels[currentLevel][currentSentenceIndex];
                const sentenceParts = currentSentence.sentence.split('__');
                
                // Create sentence with blanks
                const sentenceContainer = document.createElement('div');
                sentenceContainer.className = 'flex flex-wrap items-center gap-2 mb-4 text-lg';
                
                for (let i = 0; i < sentenceParts.length; i++) {
                    // Add text part
                    if (sentenceParts[i]) {
                        const textSpan = document.createElement('span');
                        textSpan.textContent = sentenceParts[i];
                        sentenceContainer.appendChild(textSpan);
                    }
                    
                    // Add blank if not the last part
                    if (i < sentenceParts.length - 1) {
                        const blank = document.createElement('div');
                        blank.className = 'droppable inline-block w-20 h-10 bg-gray-100 border-2 border-dashed border-indigo-300 rounded-md flex items-center justify-center';
                        blank.dataset.index = i;
                        blank.addEventListener('dragover', handleDragOver);
                        blank.addEventListener('dragleave', handleDragLeave);
                        blank.addEventListener('drop', handleDrop);
                        sentenceContainer.appendChild(blank);
                    }
                }
                
                gameArea.appendChild(sentenceContainer);
                
                // Create word options
                const shuffledOptions = [...currentSentence.options].sort(() => Math.random() - 0.5);
                
                shuffledOptions.forEach(word => {
                    const wordElement = document.createElement('div');
                    wordElement.className = 'draggable px-3 py-2 bg-indigo-500 text-white rounded-md shadow-sm hover:bg-indigo-600 transition';
                    wordElement.textContent = word;
                    wordElement.draggable = true;
                    wordElement.dataset.word = word;
                    wordElement.addEventListener('dragstart', handleDragStart);
                    wordBank.appendChild(wordElement);
                });
                
                // Add sentence type hint
                const hintElement = document.createElement('div');
                hintElement.className = 'mt-4 text-sm text-indigo-600 italic';
                hintElement.textContent = `Hint: This is a ${currentSentence.type === 'to-infinitive' ? '"It be ... to ..." pattern' : 
                                          currentSentence.type === 'that-clause' ? '"It be ... that ..." pattern' : 
                                          'special pattern'}`;
                gameArea.appendChild(hintElement);
            }

            function handleDragStart(e) {
                e.dataTransfer.setData('text/plain', e.target.dataset.word);
                e.dataTransfer.effectAllowed = 'move';
                setTimeout(() => {
                    e.target.classList.add('opacity-50');
                }, 0);
            }

            function handleDragOver(e) {
                e.preventDefault();
                e.currentTarget.classList.add('highlight');
            }

            function handleDragLeave(e) {
                e.currentTarget.classList.remove('highlight');
            }

            function handleDrop(e) {
                e.preventDefault();
                e.currentTarget.classList.remove('highlight');
                
                const word = e.dataTransfer.getData('text/plain');
                const blankIndex = e.currentTarget.dataset.index;
                
                // If there's already a word in this blank, return it to the word bank
                if (droppedWords[blankIndex]) {
                    returnWordToBank(droppedWords[blankIndex]);
                }
                
                // Place the word in the blank
                e.currentTarget.textContent = word;
                e.currentTarget.classList.add('bg-indigo-100');
                e.currentTarget.classList.remove('border-dashed');
                
                // Store the dropped word
                droppedWords[blankIndex] = word;
                
                // Remove the word from the word bank
                const wordElements = wordBank.querySelectorAll('.draggable');
                for (const element of wordElements) {
                    if (element.dataset.word === word && !element.classList.contains('opacity-50')) {
                        element.remove();
                        break;
                    }
                }
                
                // Reset opacity for any dragged word
                const draggedWords = document.querySelectorAll('.draggable.opacity-50');
                draggedWords.forEach(el => el.classList.remove('opacity-50'));
            }

            function returnWordToBank(word) {
                const wordElement = document.createElement('div');
                wordElement.className = 'draggable px-3 py-2 bg-indigo-500 text-white rounded-md shadow-sm hover:bg-indigo-600 transition';
                wordElement.textContent = word;
                wordElement.draggable = true;
                wordElement.dataset.word = word;
                wordElement.addEventListener('dragstart', handleDragStart);
                wordBank.appendChild(wordElement);
            }

            function checkAnswer() {
                const currentSentence = levels[currentLevel][currentSentenceIndex];
                const blanks = gameArea.querySelectorAll('.droppable');
                let allCorrect = true;
                
                // Check each blank
                blanks.forEach((blank, index) => {
                    const userAnswer = droppedWords[blank.dataset.index];
                    const correctAnswer = currentSentence.correctAnswer[index];
                    
                    if (userAnswer === correctAnswer) {
                        blank.classList.add('bg-green-100', 'success-animation');
                        blank.classList.remove('bg-gray-100', 'bg-red-100');
                    } else {
                        blank.classList.add('bg-red-100', 'warning');
                        blank.classList.remove('bg-gray-100', 'bg-green-100');
                        allCorrect = false;
                    }
                });
                
                // If all correct, update score and enable next button
                if (allCorrect) {
                    score++;
                    completed++;
                    updateScore();
                    nextBtn.disabled = false;
                    
                    // Show success message
                    const successMsg = document.createElement('div');
                    successMsg.className = 'mt-4 p-3 bg-green-100 text-green-800 rounded-md';
                    successMsg.textContent = 'Correct! Great job!';
                    gameArea.appendChild(successMsg);
                } else {
                    // Show try again message
                    const tryAgainMsg = document.createElement('div');
                    tryAgainMsg.className = 'mt-4 p-3 bg-red-100 text-red-800 rounded-md';
                    tryAgainMsg.textContent = 'Not quite right. Try again!';
                    gameArea.appendChild(tryAgainMsg);
                }
            }

            function resetSentence() {
                // Return all dropped words to the word bank
                Object.values(droppedWords).forEach(word => {
                    returnWordToBank(word);
                });
                
                // Clear blanks
                const blanks = gameArea.querySelectorAll('.droppable');
                blanks.forEach(blank => {
                    blank.textContent = '';
                    blank.classList.add('border-dashed', 'bg-gray-100');
                    blank.classList.remove('bg-green-100', 'bg-red-100', 'bg-indigo-100');
                });
                
                // Clear dropped words
                droppedWords = {};
                
                // Remove any messages
                const messages = gameArea.querySelectorAll('div[class*="mt-4 p-3"]');
                messages.forEach(msg => msg.remove());
                
                // Add shuffle animation to word bank
                wordBank.classList.add('shuffle-animation');
                setTimeout(() => {
                    wordBank.classList.remove('shuffle-animation');
                }, 800);
            }

            function nextSentence() {
                currentSentenceIndex++;
                
                // Check if we've completed all sentences
                if (currentSentenceIndex >= totalSentences) {
                    // Show completion message
                    gameArea.innerHTML = '';
                    const completionMsg = document.createElement('div');
                    completionMsg.className = 'p-6 bg-indigo-100 text-indigo-800 rounded-md text-center';
                    
                    if (score === totalSentences) {
                        completionMsg.innerHTML = `
                            <h3 class="text-xl font-bold mb-2">Perfect Score!</h3>
                            <p class="mb-4">You got all ${score} sentences correct! Amazing job!</p>
                            <p>Try another level to continue practicing.</p>
                        `;
                    } else {
                        completionMsg.innerHTML = `
                            <h3 class="text-xl font-bold mb-2">Level Complete!</h3>
                            <p class="mb-4">You got ${score} out of ${totalSentences} sentences correct.</p>
                            <p>Try again or select another level to continue practicing.</p>
                        `;
                    }
                    
                    gameArea.appendChild(completionMsg);
                    
                    // Disable next button
                    nextBtn.disabled = true;
                    
                    // Clear word bank
                    wordBank.innerHTML = '';
                } else {
                    // Display next sentence
                    displaySentence();
                }
            }

            function updateScore() {
                scoreElement.textContent = score;
                completedElement.textContent = completed;
                
                // Update progress bar
                const progressPercentage = (completed / totalSentences) * 100;
                progressBar.style.width = `${progressPercentage}%`;
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95acb92cb04fa9b6',t:'MTc1MTc3OTk2NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
